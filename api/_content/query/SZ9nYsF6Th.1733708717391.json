{"_path":"/analytics/eda","_dir":"analytics","_draft":false,"_partial":false,"_locale":"","title":"Exploratory Data Analysis","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"exploratory-data-analysis"},"children":[{"type":"text","value":"Exploratory Data Analysis"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"‚ÄúMost of the world will make decisions by either guessing or using their gut. They will be either lucky or wrong.‚Äù ~ Suhail Doshi"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"‚ÄúThere is nothing more deceptive than an obvious fact.‚Äù ~ (Sherlock Holmes) Arthur Conan Doyle"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"eda","src":"https://mir-s3-cdn-cf.behance.net/project_modules/fs/3db83c97871397.5ecf4f75da3b3.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Source:"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://www.behance.net/weiyi_1991c64f","rel":["nofollow"]},"children":[{"type":"text","value":"New Retail Big Data Situation Awareness Screen by Zoe Shen"}]}]},{"type":"element","tag":"h2","props":{"id":"notebook-outline"},"children":[{"type":"text","value":"Notebook Outline"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What is EDA?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Questions To Explore"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Exploratory Data Analysis Stage\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A Bit of Data Prep"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Exploratory Stage"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Dashboard"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Takeaways / Reporting"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Blind Spots"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Future work"}]}]},{"type":"element","tag":"h2","props":{"id":"_1-what-is-eda"},"children":[{"type":"text","value":"1. What is EDA?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"gloabl_emission","src":"https://mir-s3-cdn-cf.behance.net/project_modules/1400_opt_1/a199d32434363.5635ff285dc8d.jpg"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Source:"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://www.behance.net/gallery/2434363/How-to-Reduce-CO2-Emission","rel":["nofollow"]},"children":[{"type":"text","value":"Paulina Urba≈Ñska"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Exploratory Data Analysis (EDA) is summarised in the name itself, it is an approach to data analysis where the goal is the exploration of the data and not necessarily hypothesis/model testing, although this can happen at this stage."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Exploratory_data_analysis","rel":["nofollow"]},"children":[{"type":"text","value":"Wikepedia, along with all of its cited sources,"}]},{"type":"text","value":" has a great definition which in turn was derived from the work of late John Tukey, a well-known statistician who is considered the creator of EDA as a concept and approach to data analysis."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In statistics, exploratory data analysis is an approach to analyzing data sets to summarize their main characteristics, often with visual methods. A statistical model can be used or not, but primarily EDA is for seeing what the data can tell us beyond the formal modeling or hypothesis testing task. Exploratory data analysis was promoted by John Tukey to encourage statisticians to explore the data, and possibly formulate hypotheses that could lead to new data collection and experiments. EDA is different from initial data analysis (IDA), which focuses more narrowly on checking assumptions required for model fitting and hypothesis testing, and handling missing values and making transformations of variables as needed. EDA encompasses IDA."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Characteristics of EDA"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It allows us to spot further inconsistencies within the data after the preparation stage"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It helps us ask questions that expose facts about the data we have"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It allows us to see complex interactions within the data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The visualisations at this stage are not necessarily meant to be publication-ready but rather quick and dirty constructs to asnwer questions from a different perspectives"}]}]},{"type":"element","tag":"h2","props":{"id":"_2-questions-to-explore"},"children":[{"type":"text","value":"2. Questions to Explore"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"funny_question","src":"https://imgs.xkcd.com/comics/questions.png"},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Source:"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://xkcd.com/1256/","rel":["nofollow"]},"children":[{"type":"text","value":"xkcd.com"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here are the questions we will be exploring in this notebook. Before you head to the explanations, pause for a bit and think about how you would go about answering the following questions. Ask yourself, what kind of information would be most useful, which method/function and the like would be most appropriate to answer it? Should I visualise the answer as well?"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What does the distribution of our monetary columns look like?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What's the difference in the average price charged by super hosts versus the regular ones?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Do more bathrooms make a listing more expensive? üõÅ | üöΩ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Do more rooms make a listing more expensive?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Does the availability of more beds make a listing more expensive? üõè"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Is there a noticeable price difference between room types offered by hosts? üèò"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Is there a noticeable price difference between room types that offer different quantities of beds in the listing? üõè + üõè != üõè"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"How important is it that our host is a verified one? ‚úçüèΩ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Should we care whether the listings asks for a license or not?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Do we need Wifi, or can we be without it?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Reviews! How important are they in our decision to buy or not to buy? ü§î"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Do we care about the cancellation policy?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What is the average price difference between getting a listing that can be booked instantly vs one that we cannot book it instantly?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What is the price difference between listings that charge a security deposit vs those that don't?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What does the average price between different property types look like?"}]}]},{"type":"element","tag":"h1","props":{"id":"_3-exploratory-data-analysis-stage"},"children":[{"type":"text","value":"3. Exploratory Data Analysis Stage"}]},{"type":"element","tag":"h2","props":{"id":"_31-a-bit-of-preparation"},"children":[{"type":"text","value":"3.1 A Bit of Preparation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You will need to install the following packages for this session. Once you install them, make sure you restart the notebook before you begin working on the lesson."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# !conda install -c pyviz holoviews panel bokeh -y\n# !jupyter labextension install @pyviz/jupyterlab_pyviz\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# !conda install -c pyviz holoviews panel bokeh -y\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# !jupyter labextension install @pyviz/jupyterlab_pyviz\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"import pandas as pd, os, numpy as np\nfrom bokeh.plotting import figure, show, output_file, output_notebook\nfrom bokeh.models import ColumnDataSource # similar to a pandas dataframe but specific for bokeh\nfrom bokeh.transform import dodge # a helpful tool for placing bar charts close to each other\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport holoviews as hv\nfrom holoviews import opts, dim\n\n\nimport urllib # we will use this again to get more websites\nfrom PIL import Image # we will be looking at some Airbnb images\nimport requests\nfrom io import BytesIO # for the images\n\npd.options.display.max_columns = None\npd.options.display.max_rows = None\npd.options.display.float_format = '{:.4f}'.format # reduce numbers to 4 decimals\nhv.extension('bokeh') # holoviews will be using bokeh behind the scenes\n\noutput_notebook()\n\n# this magic command helps us to not reload our session every time we install a new package\n\n%matplotlib inline\n%load_ext autoreload \n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"import pandas as pd, os, numpy as np\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from bokeh.plotting import figure, show, output_file, output_notebook\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from bokeh.models import ColumnDataSource # similar to a pandas dataframe but specific for bokeh\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from bokeh.transform import dodge # a helpful tool for placing bar charts close to each other\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"import seaborn as sns\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"import matplotlib.pyplot as plt\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"import holoviews as hv\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from holoviews import opts, dim\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"import urllib # we will use this again to get more websites\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from PIL import Image # we will be looking at some Airbnb images\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"import requests\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from io import BytesIO # for the images\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pd.options.display.max_columns = None\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pd.options.display.max_rows = None\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pd.options.display.float_format = '{:.4f}'.format # reduce numbers to 4 decimals\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hv.extension('bokeh') # holoviews will be using bokeh behind the scenes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"output_notebook()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# this magic command helps us to not reload our session every time we install a new package\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"%matplotlib inline\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"%load_ext autoreload\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's first add a variable with the path to where all of our data lives at. If yours is different than the one below, make sure you change the variable below to the correct path."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"path = '../data'\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"path = '../data'\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can choose to read in the cleaned dataset in whichever format you prefer, CSV or parquet. Uncomment the one you prefer and continue on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" If you were not able to save your file in the parquet format at the end of the previous notebook, make sure you go back and install the packages at the end of the notebook before you run it again. For now, go on with your CSV file."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# csv file\n# df = pd.read_csv(os.path.join(path, 'clean_csv', 'clean_airbnb.csv'), parse_dates=True)\n\n# parquet file\ndf = pd.read_parquet(os.path.join(path, 'clean_parquet', 'clean_airbnb.parquet'))\n\ndf.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# csv file\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# df = pd.read_csv(os.path.join(path, 'clean_csv', 'clean_airbnb.csv'), parse_dates=True)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# parquet file\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df = pd.read_parquet(os.path.join(path, 'clean_parquet', 'clean_airbnb.parquet'))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df.shape\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# let's quickly examine our data\ndf.head(2)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# let's quickly examine our data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df.head(2)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first step we are going to take is to create a column that represents the real price per stay. You might wonder, what do we mean by the real price per stay, so here is a quick explanation for that. Airbnb is an online marketplace with buyers (us) and sellers (the hosts), and in the same way we have our own specifications regarding where we would like to stay, the hosts might also have their own specifications in regards to whom they rent their places to. Here are some characteristics we need to pay attention to when creating our real price column."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The price is given per night"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"There is a cleaning fee which, if available, is not included in the price"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The minimum amount of nights one can rent a listing for differs from country to country, and from listing to listing"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"There might be a security deposit we have to pay in advance"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The second step we are going to take is to start introducting our specifications to our analysis to narrow down the scope of our search. We will be traveling solo and even though our specifications will reflect this, each step of our process can also be extended to a much larger group of travelers."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's begin by creating our "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"min_price_per_stay"}]},{"type":"text","value":" column by multiplying the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"price"}]},{"type":"text","value":" column by the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"minimum_nights"}]},{"type":"text","value":" column and then adding the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cleaning_fee"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"security_deposit"}]},{"type":"text","value":" columns. We will check the data types of our variables first to make sure these are all numerical variables."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# let's make sure all of the columns we need are numerical\ndf.dtypes\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# let's make sure all of the columns we need are numerical\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df.dtypes\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Our "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"minimum_nights"}]},{"type":"text","value":" column was not of a numerical type so we will convert to an integer column in the cell below."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# minimum_nights was not numerical so we will convert it to int32 with the .astype() method\ndf['minimum_nights'] = df['minimum_nights'].astype(np.int32)\ndf['minimum_nights'].describe()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# minimum_nights was not numerical so we will convert it to int32 with the .astype() method\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df['minimum_nights'] = df['minimum_nights'].astype(np.int32)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df['minimum_nights'].describe()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# let's now create our true cost variable\ndf['min_price_per_stay'] = (df['price'] * df['minimum_nights']) + df['cleaning_fee'] + df['security_deposit']\ndf[['price', 'min_price_per_stay']].head()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# let's now create our true cost variable\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df['min_price_per_stay'] = (df['price'] * df['minimum_nights']) + df['cleaning_fee'] + df['security_deposit']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df[['price', 'min_price_per_stay']].head()\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, let's examine the differences between the columns we just used, first throughout the entire dataset, and then split by country using the pandas "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"describe()"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".groupby()"}]},{"type":"text","value":" methods to see what we have."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# select the columns we want\nmoney_columns = ['price', 'cleaning_fee', 'security_deposit', 'minimum_nights', 'min_price_per_stay']\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# select the columns we want\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_columns = ['price', 'cleaning_fee', 'security_deposit', 'minimum_nights', 'min_price_per_stay']\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# describe them to see what we have\ndf[money_columns].describe().T\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# describe them to see what we have\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df[money_columns].describe().T\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# now look at the distribution of these variables per country\nmoney_measures = df.groupby('country')[money_columns].agg(['min', 'mean', 'median', 'max'])\nmoney_measures.T\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# now look at the distribution of these variables per country\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_measures = df.groupby('country')[money_columns].agg(['min', 'mean', 'median', 'max'])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_measures.T\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first thing that should come to our attention is the fact that we have extremely low and high prices that, although we may have been able to deal with during the cleaning stage, they would have been difficult to spot without some analysis throughout that stage (and we would have peaked at the data too üëÄ). Nonetheless, since we know our budget quite well, max 1,500 USD for 2 weeks, we will go ahead and filter out the listings that don't match that criterion. In addition, since we know (or assume that) it is very unlikely to see free listings (a price of 0) in Airbnb, we will get rid of any listing that costs less than 40 USD per stay, as this is a reasonable amount for a minimum per night (you can pick another value if you'd like)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's create a max budget column by multiplying the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"price"}]},{"type":"text","value":" column by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"14"}]},{"type":"text","value":" and then adding the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cleaning_fee"}]},{"type":"text","value":". We will count on getting our deposit back so we will not include it in this particular variable."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df['two_weeks_price'] = df['price'] * 14 + df['cleaning_fee']\ndf['two_weeks_price'].head()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df['two_weeks_price'] = df['price'] * 14 + df['cleaning_fee']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df['two_weeks_price'].head()\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now that we have our "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"two_weeks_price"}]},{"type":"text","value":" we will create a low price condition to filter out prices less then "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" can be anything you'd like). We will also create a minimum amount of nights condition as we are going on a 2 week trip, nothing more, nothing less. Lastly, we will need a budget condition for our "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"two_weeks_price"}]},{"type":"text","value":" variable that filters out anything over 1,500 USD, and then we will filter our data using these conditions."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# our minimum amount\nlow_price_condition = df['price'] > 40\n# our highest amount\nbudget_condition = df['two_weeks_price'] <= 1500\n# minimum amount of nights cannot be greater than 2 weeks\nnights_min_condition = df['minimum_nights'] < 15\n# let's filter our data\ndf_budget = df[low_price_condition & budget_condition & nights_min_condition].copy()\ndf_budget.shape, df.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# our minimum amount\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"low_price_condition = df['price'] > 40\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# our highest amount\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"budget_condition = df['two_weeks_price'] <= 1500\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# minimum amount of nights cannot be greater than 2 weeks\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"nights_min_condition = df['minimum_nights'] < 15\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# let's filter our data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_budget = df[low_price_condition & budget_condition & nights_min_condition].copy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_budget.shape, df.shape\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We should make sure there are no more "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" in the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"min"}]},{"type":"text","value":" index for the price column of our countries."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"money_measures = df_budget.groupby('country')[money_columns].agg(['min', 'mean', 'median', 'max'])\nmoney_measures.T\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_measures = df_budget.groupby('country')[money_columns].agg(['min', 'mean', 'median', 'max'])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_measures.T\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_32-exploratory-stage"},"children":[{"type":"text","value":"3.2 Exploratory Stage"}]},{"type":"element","tag":"h3","props":{"id":"question-1"},"children":[{"type":"text","value":"Question 1"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What does the distribution of our monetary columns look like? In other words, where are most of the prices at in relation to the most common vlues of our columns."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this question we could use the pandas plotting functionality first, and then move on to making a bit more informative plots."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# plain pandas\nprice_hist = df_budget['price'].hist(bins=25)\nprice_hist;\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# plain pandas\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"price_hist = df_budget['price'].hist(bins=25)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"price_hist;\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We could also use the library we just imported, holoviews, with NumPy and create a nicer looking histograms. But, what is a histogram anyways? "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Histogram","rel":["nofollow"]},"children":[{"type":"text","value":"Acording to Wikipedia"}]},{"type":"text","value":" and their wonderful cited sources, a histogram is"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"an approximate representation of the distribution of numerical data. It was first introduced by Karl Pearson. To construct a histogram, the first step is to \"bin\" (or \"bucket\") the range of values‚Äîthat is, divide the entire range of values into a series of intervals‚Äîand then count how many values fall into each interval. The bins are usually specified as consecutive, non-overlapping intervals of a variable. The bins (intervals) must be adjacent and are often (but not required to be) of equal size."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Awesome! How can we create one with holoviews and NumPy?"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"np.histogram()"}]},{"type":"text","value":" to create 2 new arrays, one with the edges of the bins and another with the frequencies of the values within each edge. The function returns a tuple with 2 arrays so we will unpack the tuple into 2 variables."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pass your two variables as a tuple with your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"edges"}]},{"type":"text","value":" first and the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"frequencies"}]},{"type":"text","value":" second, to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hv.Histogram"}]},{"type":"text","value":" function."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Evaluate your plot."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's see how this works."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"frequencies, edges = np.histogram(df_budget['price'], bins=40)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"frequencies, edges = np.histogram(df_budget['price'], bins=40)\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"frequencies[:5] # first array\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"frequencies[:5] # first array\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"edges[:5] # second array\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"edges[:5] # second array\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"hv.Histogram((edges, frequencies)) # our dataviz\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hv.Histogram((edges, frequencies)) # our dataviz\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It would be great if we could see all columns in one visualisation and have a widget to pick which column we'd like to see. Let's create just that."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First we will create a function that takes in a column, creates a numpy histogram based on the data and the column we have selected, and then create a holoviews histogram. Remember that "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"**kwargs"}]},{"type":"text","value":" means any combination of key-value pairs that could be overwritten or added to a function. We will call our new function "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"load_currency"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"def load_currency(column, **kwargs):\n    frequencies, edges = np.histogram(df_budget[column], 50)\n    return hv.Histogram((frequencies, edges)).opts(framewise=True, tools=['hover'])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"def load_currency(column, **kwargs):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    frequencies, edges = np.histogram(df_budget[column], 50)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return hv.Histogram((frequencies, edges)).opts(framewise=True, tools=['hover'])\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"money_columns = ['price', 'cleaning_fee', 'security_deposit', 'minimum_nights', 'min_price_per_stay', 'two_weeks_price']\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_columns = ['price', 'cleaning_fee', 'security_deposit', 'minimum_nights', 'min_price_per_stay', 'two_weeks_price']\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will then use holoviews "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DynamicMap"}]},{"type":"text","value":" function as it allows us to map functions to the data to make interactive charts. The first argument is the plain function we just created and the second is the key dimension where the interactivity is coming from. In our case, this is our list of currency columns which will now be in a dropdown box for us to pick and choose. We will assign our new object to a variable called "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dmap"}]},{"type":"text","value":" and finish our visualisation by adding some options to the figure, mainly, height and width. The last step is to tell holoviews where these columns are coming from using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".redim.values()"}]},{"type":"text","value":" method. Note that "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Money_Cols"}]},{"type":"text","value":" is a name we came up with for the widget but it can be anything we'd like. All we need to do is to make sure that we use the same name for our kdims argument."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" You could add more numerical variables to the list above and visualize even more histograms."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"dmap = hv.DynamicMap(load_currency, kdims='Money_Cols').redim.values(Money_Cols=money_columns)\ndmap.opts(height=600, width=800)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"dmap = hv.DynamicMap(load_currency, kdims='Money_Cols').redim.values(Money_Cols=money_columns)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"dmap.opts(height=600, width=800)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's an awesome visualisation and it allows us to evaluate the dispersion within our monetary columns more clearly. See if you can tweak the function and other parameters to come up with another cool visualization."}]},{"type":"element","tag":"h3","props":{"id":"question-2"},"children":[{"type":"text","value":"Question 2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What's the difference in the average price charged by super hosts versus the regular ones? What would be the difference if we were to split it by country?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"price_super_diff = df_budget.pivot_table(\n    columns='host_is_superhost',\n    values='two_weeks_price',\n    aggfunc='mean'\n)\nprice_super_diff\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"price_super_diff = df_budget.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='host_is_superhost',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values='two_weeks_price',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc='mean'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"price_super_diff\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"price_super_diff['t'] - price_super_diff['f']\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"price_super_diff['t'] - price_super_diff['f']\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Not a big difference at all. Let's look at the same measure but by country now."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"q1 = df_budget.pivot_table(\n    index='country',\n    columns='host_is_superhost',\n    values='two_weeks_price',\n    aggfunc='mean'\n)\nq1\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"q1 = df_budget.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='country',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='host_is_superhost',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values='two_weeks_price',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc='mean'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"q1\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As we can see, even though there are some instances where the regular hosts are more expensive than the super hosts, for the most part, super hosts seem to have slightly higher prices for a two week stay than the regular ones. Let's go ahead and visualize this."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will first use "},{"type":"element","tag":"a","props":{"href":"https://docs.bokeh.org/en/latest/docs/user_guide/data.html","rel":["nofollow"]},"children":[{"type":"text","value":"bokeh's ColumnDataSource object to create"}]},{"type":"text","value":" a bokeh-specific dataframe. This makes it easier for bokeh to convert any specification to JavaScript code before creating and showing the plot for us. In addition, it not only allows us to share data between different plots but there are also bokeh objects/glyphs/models that will only interact with data coming from a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ColumnDataSource"}]},{"type":"text","value":" frame. To use it we can pass in the full dataset or specify the pieces of a dataset we will need using a dictionary or a similar object. We will use the dictionary to reassign all of the pieces from our table above and add this to a variable called "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"source"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"source = ColumnDataSource(dict(\n    countries=q1.index,\n    super_host=q1.t,\n    regular_host=q1.f\n))\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"source = ColumnDataSource(dict(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    countries=q1.index,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    super_host=q1.t,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    regular_host=q1.f\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"))\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will now create a bar chart with our data."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# create your figure\np = figure(x_range=list(q1.index), # the names or numbers to be used in the x axis\n           plot_height=350,\n           title=\"Average Cost for a 2-week Stay per Country\",\n           toolbar_location=None, tools=\"\") # we won't be using any toolbars here but you can if you'd like\n\np.vbar(x=dodge('countries', -0.15, range=p.x_range), # dodge helps us separate the bars\n       top='super_host', \n       width=0.25, # this is the width of the green bars\n       source=source, # the data\n       color=\"#A3BE8C\", legend_label=\"Super Host\")\n\np.vbar(x=dodge('countries',  0.15,  range=p.x_range), # dodge helps us separate the bars\n       top='regular_host', width=0.25, source=source,\n       color=\"#5E81AC\", legend_label=\"Regular Host\")\n\n\np.x_range.range_padding = 0.3 # the space from the range of countries to the edges of the figure\np.xgrid.grid_line_color = None # bars from each country to the top\np.legend.location = (320, 255) # play with these numbers and see where you can place the legend at\np.legend.orientation = \"horizontal\" # items are next to each other in the legend\n\nshow(p)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# create your figure\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"p = figure(x_range=list(q1.index), # the names or numbers to be used in the x axis\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"           plot_height=350,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"           title=\"Average Cost for a 2-week Stay per Country\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"           toolbar_location=None, tools=\"\") # we won't be using any toolbars here but you can if you'd like\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"p.vbar(x=dodge('countries', -0.15, range=p.x_range), # dodge helps us separate the bars\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"       top='super_host', \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"       width=0.25, # this is the width of the green bars\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"       source=source, # the data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"       color=\"#A3BE8C\", legend_label=\"Super Host\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"p.vbar(x=dodge('countries',  0.15,  range=p.x_range), # dodge helps us separate the bars\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"       top='regular_host', width=0.25, source=source,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"       color=\"#5E81AC\", legend_label=\"Regular Host\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"p.x_range.range_padding = 0.3 # the space from the range of countries to the edges of the figure\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"p.xgrid.grid_line_color = None # bars from each country to the top\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"p.legend.location = (320, 255) # play with these numbers and see where you can place the legend at\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"p.legend.orientation = \"horizontal\" # items are next to each other in the legend\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"show(p)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There doesn't seem to be a big difference between the prices charged by super hosts and regular hosts among the countries we picked. Let's keep exploring."}]},{"type":"element","tag":"h3","props":{"id":"question-3"},"children":[{"type":"text","value":"Question 3"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do more bathrooms make a listing more expensive?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To answer this question, let's first plot the distribution of prices among the bathrooms available per listing."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"bathrooms_group = df_budget.groupby('bathrooms')\nbathrooms_group['two_weeks_price'].mean().plot(kind='bar', rot=-70);\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bathrooms_group = df_budget.groupby('bathrooms')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bathrooms_group['two_weeks_price'].mean().plot(kind='bar', rot=-70);\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It seems as if listings with 7.5 bathrooms will give us the absolute best deal, right? Let's look at the frequencies of these listings first to see whether this is a true average of more than one value."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"bathrooms_group['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bathrooms_group['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In effect, this average is not what we were expecting, but, we can explore further and see what's up with the ones with a lot of bathrooms and a relatively low price. Remember our image function?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"def image_show(image_url):\n    return Image.open(BytesIO(requests.get(image_url).content))\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"def image_show(image_url):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return Image.open(BytesIO(requests.get(image_url).content))\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"bathroom_num = 7.5\nsome_images = df_budget.loc[df_budget['bathrooms'] == bathroom_num, ['id', 'picture_url', 'two_weeks_price']]\nsome_images.head()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bathroom_num = 7.5\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"some_images = df_budget.loc[df_budget['bathrooms'] == bathroom_num, ['id', 'picture_url', 'two_weeks_price']]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"some_images.head()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"image_show(some_images.iloc[0, 1])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"image_show(some_images.iloc[0, 1])\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Okay at least we know that we do not want to stay a place without a single bathroom, so we will remove observations without at least one bathroom and assign the resulting dataframe to a new variable."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"bathroom_cond = df_budget['bathrooms'] < 1 # we have to have bathrooms\nbathroom_cond.head()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bathroom_cond = df_budget['bathrooms'] < 1 # we have to have bathrooms\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bathroom_cond.head()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_bath = df_budget[~bathroom_cond].copy()\nprint(f\"We reduced our search space by {df_budget.shape[0] - df_bath.shape[0]} listings!!\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_bath = df_budget[~bathroom_cond].copy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(f\"We reduced our search space by {df_budget.shape[0] - df_bath.shape[0]} listings!!\")\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"question-4"},"children":[{"type":"text","value":"Question 4"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do more rooms make a listing more expensive on average? or, put in other words, what is the difference between prices in a listing with 0 or a few bedrooms versus a listing with (say) more than 5?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"room_num_group = df_bath.groupby('bedrooms')['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\nroom_num_group\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"room_num_group = df_bath.groupby('bedrooms')['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"room_num_group\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"room_num_group.iloc[:, 1:].plot(kind='bar');\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"room_num_group.iloc[:, 1:].plot(kind='bar');\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"room_num_group['mean'].plot(kind='bar');\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"room_num_group['mean'].plot(kind='bar');\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can't really compare averages here as the amount beds available in our dataset differs drastically, but there's still something useful to be said though. Let's look at the sorted values in decreasing order to see if we can spot the lowest prices of all. We'll create a function that takes in a dataframe, a column name, and a number to display after it sorts the array. We will then use our function in a for loop to print all of the variables."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"def sort_n_show(series, col_to_sort, n_toshow):\n    print(series.sort_values(col_to_sort)[col_to_sort][:n_toshow])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"def sort_n_show(series, col_to_sort, n_toshow):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    print(series.sort_values(col_to_sort)[col_to_sort][:n_toshow])\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"for col in room_num_group.columns:\n    print(f\"This is the {col} column\")\n    sort_n_show(room_num_group, col, 3)\n    print('-' * 30)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"for col in room_num_group.columns:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    print(f\"This is the {col} column\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    sort_n_show(room_num_group, col, 3)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    print('-' * 30)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Although 12 bedrooms seem to be the one with the overall lowest price (and the one that appears the most), we need to do some further digging to really be sure of any selection. Before we move on, let's have a look at our infamous cheap listing with 12 bedrooms."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_budget.loc[df_budget['bedrooms'] == 12, 'picture_url']\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_budget.loc[df_budget['bedrooms'] == 12, 'picture_url']\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"image_show(df_budget.loc[df_budget['bedrooms'] == 12, 'picture_url'].iloc[1])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"image_show(df_budget.loc[df_budget['bedrooms'] == 12, 'picture_url'].iloc[1])\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_budget.loc[df_budget['bedrooms'] == 12, 'description'].iloc[0]\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_budget.loc[df_budget['bedrooms'] == 12, 'description'].iloc[0]\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ahhh! That makes sense now, the guest house is not necessarily commenting on a room per se but rather putting down information that belongs to both, the entire house and the rooms. Hence, this might be a bargain for such a low price. Let's keep exploring though."}]},{"type":"element","tag":"h3","props":{"id":"question-5"},"children":[{"type":"text","value":"Question 5"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What about the beds? Do we care about the amount of beds available within our listing, and/or is there a price difference between having more, none, or just 1? In other words, does the availability of more beds make a listing more expensive?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"beds_group = df_bath.groupby('beds')['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\nbeds_group.T\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"beds_group = df_bath.groupby('beds')['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"beds_group.T\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"prices_two = df_bath['two_weeks_price'] > 1498.2335\nbeds_0 = df_bath['beds'] == 0\nimage_show(df_bath.loc[prices_two & beds_0, 'picture_url'].iloc[0])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"prices_two = df_bath['two_weeks_price'] > 1498.2335\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"beds_0 = df_bath['beds'] == 0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"image_show(df_bath.loc[prices_two & beds_0, 'picture_url'].iloc[0])\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"beds_group['mean'].plot(kind='bar');\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"beds_group['mean'].plot(kind='bar');\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While there is very little variation within the minimum price of a listing regardless of the amount of beds available, the median and mean tell a different story. As shown in the table and image above, while the minimum prices vary drastically, the mean and median do seem to be capturing the most commmon prices for x number of beds available in a listing. The oddball here was the number 22. We don't necessarily want to stay in a room with 22 beds if we don't have to so let's see what the image of that listing has to offer."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"bed_url = df_bath.loc[df_bath['beds'] == 22, 'picture_url'].iloc[0]\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bed_url = df_bath.loc[df_bath['beds'] == 22, 'picture_url'].iloc[0]\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"image_show(bed_url)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"image_show(bed_url)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While this is the second time we see this listing with the super low price, and while it doesn't seem like that bad a deal to take, we'll continue exploring to see if we can find better offerings."}]},{"type":"element","tag":"h3","props":{"id":"question-6"},"children":[{"type":"text","value":"Question 6"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Is there a noticeable price difference between room types offered by hosts?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"rooms = df_bath.groupby('room_type')['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\nrooms\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"rooms = df_bath.groupby('room_type')['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"rooms\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"roomba = rooms[['min', 'mean', 'median', 'max']].plot(kind='bar', rot=45)\nroomba;\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"roomba = rooms[['min', 'mean', 'median', 'max']].plot(kind='bar', rot=45)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"roomba;\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here we can see that there are not that many differences between most of the prices per se but the n count differs drastically between room type, and the shared rooms seem to have the lowest price of all on average. Let's keep exploring."}]},{"type":"element","tag":"h3","props":{"id":"question-7"},"children":[{"type":"text","value":"Question 7"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Is there a noticeable average price difference between room types that offer different quantities of beds?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's create a dummy variable of three categories for no beds, 1 bed, or more beds. We will use a function alogside some if-else statements, and the apply it to every element in our beds column."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"def get_a_dummy(x):\n    if x == 1:\n        return \"One\"\n    elif x < 1:\n        return 'None'\n    else:\n        return \"More than One\"\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"def get_a_dummy(x):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    if x == 1:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        return \"One\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    elif x < 1:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        return 'None'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    else:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        return \"More than One\"\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_bath['beds_dummy'] = df_bath.loc[:, 'beds'].apply(get_a_dummy).copy() # applies a function to every element in a column\ndf_bath['beds_dummy'].value_counts()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_bath['beds_dummy'] = df_bath.loc[:, 'beds'].apply(get_a_dummy).copy() # applies a function to every element in a column\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_bath['beds_dummy'].value_counts()\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's create a slightly more complex groupby object and see how our "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"two_weeks_price"}]},{"type":"text","value":" changes with our new categorical variables."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"rooms_and_beds = df_bath.groupby(['room_type', 'beds_dummy'])['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\nrooms_and_beds.T\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"rooms_and_beds = df_bath.groupby(['room_type', 'beds_dummy'])['two_weeks_price'].agg(['count', 'min', 'mean', 'median', 'max'])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"rooms_and_beds.T\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So we want at least one bed, and because of this, we will filter out those with no beds whatsoever."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_beds = df_bath[df_bath['beds_dummy'] != 'None'].copy()\nprint(f\"We reduced our search by {df_bath.shape[0] - df_beds.shape[0]} listings!!\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_beds = df_bath[df_bath['beds_dummy'] != 'None'].copy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(f\"We reduced our search by {df_bath.shape[0] - df_beds.shape[0]} listings!!\")\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_beds.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_beds.shape\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"question-8"},"children":[{"type":"text","value":"Question 8"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How important is it that our host is a verified one? Should we stay with a host that has not been verified? Probably not, but let's see what we have in terms of prices."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_beds.host_identity_verified.value_counts()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_beds.host_identity_verified.value_counts()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_beds.pivot_table(\n    index='host_identity_verified',\n    columns='host_is_superhost',\n    values='two_weeks_price',\n    aggfunc='count'\n)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_beds.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='host_identity_verified',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='host_is_superhost',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values='two_weeks_price',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc='count'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_beds.pivot_table(\n    index='host_identity_verified',\n    columns='host_is_superhost',\n    values='two_weeks_price',\n    aggfunc='mean'\n)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_beds.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='host_identity_verified',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='host_is_superhost',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values='two_weeks_price',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc='mean'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Is it even possible to be a super host without being verified first? Apparently one can, but the verified ones are still cheaper. Let's go ahead and remove the hosts that have not been verified."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_verified = df_beds[df_beds['host_identity_verified'] == 't'].copy()\nprint(f\"We reduced our search by {df_beds.shape[0] - df_verified.shape[0]} listings!!\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_verified = df_beds[df_beds['host_identity_verified'] == 't'].copy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(f\"We reduced our search by {df_beds.shape[0] - df_verified.shape[0]} listings!!\")\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"question-9"},"children":[{"type":"text","value":"Question 9"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Should we care whether the listings asks for a license or not?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We don't have a license for either of this countries and your intructor, personally, does not have one at all (although he is a great driver nontheless üòé + üöó = üôåüèº), but that does not mean we should get rid of the ones that require one since we technically don't know whether they mean an ID or an actual license. In addition, we might be getting rid of a lot of obsevations that we would not want to get rid of in the first place. Let's examine this variable."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_verified.requires_license.value_counts()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_verified.requires_license.value_counts()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_verified.pivot_table(\n    index='room_type',\n    columns='requires_license',\n    values=['two_weeks_price', 'cleaning_fee'],\n    aggfunc=['count', 'mean']\n)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_verified.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='room_type',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='requires_license',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values=['two_weeks_price', 'cleaning_fee'],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc=['count', 'mean']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It seems upon first inspection the price for our stay is cheaper with hosts that don't require a lisence. Let's see the rest of the story by country."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_verified.pivot_table(\n    index='country',\n    columns='requires_license',\n    values='two_weeks_price',\n    aggfunc=['count', 'mean']\n)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_verified.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='country',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='requires_license',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values='two_weeks_price',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc=['count', 'mean']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In effect, if we get rid of the listings that do require a lisence (which might be the hosts saying you need an ID), we would be getting rid of all listings in Japan and we don't want that to happen."}]},{"type":"element","tag":"h3","props":{"id":"question-10"},"children":[{"type":"text","value":"Question 10"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do we need Wifi, or can we be without it?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_verified.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_verified.shape\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_verified['amenities'].head().iloc[0]\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_verified['amenities'].head().iloc[0]\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"wifi_yes = df_verified.amenities.str.contains('Wifi', case=False)\nwifi_yes.sum()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"wifi_yes = df_verified.amenities.str.contains('Wifi', case=False)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"wifi_yes.sum()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"hot_water = df_verified.amenities.str.contains('Washer', case=False)\nhot_water.sum()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hot_water = df_verified.amenities.str.contains('Washer', case=False)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hot_water.sum()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_verified.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_verified.shape\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We won't have service and would hate to miss any important information regarding any activity we might have scheduled ahead of time. Because of this, we will have to take out the places that do not include Wifi."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_wifi = df_verified[wifi_yes].copy()\ndf_wifi.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_wifi = df_verified[wifi_yes].copy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_wifi.shape\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"question-11"},"children":[{"type":"text","value":"Question 11"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reviews! How important are they in our decision to rent or not to rent? ü§î"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's look at the distribution first."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_wifi.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_wifi.shape\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_wifi['number_of_reviews'].describe()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_wifi['number_of_reviews'].describe()\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Review columns are informative but we need to make sure there are no reviews equal to 0 before we examine the next ones. That way we can actually explore them."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's extract the reviews columns."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"review_cols = [col for col in list(df_wifi.columns) if 'review_scores' in col]\nreview_cols\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"review_cols = [col for col in list(df_wifi.columns) if 'review_scores' in col]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"review_cols\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"reviews_condition = df_wifi['number_of_reviews'] != 0 # condition for no reviews\nyes_reviews = df_wifi.loc[reviews_condition].copy() # dataset with reviews\nno_reviews = df_wifi.loc[~reviews_condition].copy() # dataset without reviews\nyes_reviews['number_of_reviews'].describe(), no_reviews['number_of_reviews'].describe()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"reviews_condition = df_wifi['number_of_reviews'] != 0 # condition for no reviews\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"yes_reviews = df_wifi.loc[reviews_condition].copy() # dataset with reviews\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"no_reviews = df_wifi.loc[~reviews_condition].copy() # dataset without reviews\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"yes_reviews['number_of_reviews'].describe(), no_reviews['number_of_reviews'].describe()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"yes_reviews[review_cols].describe().T\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"yes_reviews[review_cols].describe().T\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"yes_reviews.groupby(['country', 'room_type'])[review_cols].mean().T\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"yes_reviews.groupby(['country', 'room_type'])[review_cols].mean().T\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"revs_price = sns.scatterplot(x='review_scores_rating', y='two_weeks_price', data=yes_reviews)\nrevs_price;\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"revs_price = sns.scatterplot(x='review_scores_rating', y='two_weeks_price', data=yes_reviews)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"revs_price;\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Notice how the story changes when we split by room. We know we don't want to spend a fortune with this trip, but we are also aware that a bad pick could be detrimental to our stay. So, since we rather err on the cautious side, let's pick a cut off point for the reviews that makes sense to us."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"clean = yes_reviews['review_scores_cleanliness'] > 9\nrating = yes_reviews['review_scores_rating'] > 85\nvalue = yes_reviews['review_scores_value'] > 8\naccuracy = yes_reviews['review_scores_accuracy'] > 9\ncheckin = yes_reviews['review_scores_checkin'] > 7.5\ncomms = yes_reviews['review_scores_communication'] > 8\nlocation = yes_reviews['review_scores_location'] > 8.5\nrating.head(2)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"clean = yes_reviews['review_scores_cleanliness'] > 9\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"rating = yes_reviews['review_scores_rating'] > 85\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"value = yes_reviews['review_scores_value'] > 8\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"accuracy = yes_reviews['review_scores_accuracy'] > 9\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"checkin = yes_reviews['review_scores_checkin'] > 7.5\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"comms = yes_reviews['review_scores_communication'] > 8\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"location = yes_reviews['review_scores_location'] > 8.5\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"rating.head(2)\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_revs = yes_reviews.loc[clean & rating & value & accuracy & checkin & comms & location].copy()\ndf_revs.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_revs = yes_reviews.loc[clean & rating & value & accuracy & checkin & comms & location].copy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_revs.shape\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_revs.country.value_counts()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_revs.country.value_counts()\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"question-12"},"children":[{"type":"text","value":"Question 12"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do we care about the cancellation policy?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since it is an expensive trip, it is important to at least account for last minute emergencies and be sure that we can recuperate at least some of our money."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_revs.cancellation_policy.value_counts()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_revs.cancellation_policy.value_counts()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_revs.cancellation_policy.value_counts().plot(kind='bar', rot=45)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_revs.cancellation_policy.value_counts().plot(kind='bar', rot=45)\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"super_strict = df_revs['cancellation_policy'] != 'super_strict_30'\nsuper_less_strict = df_revs['cancellation_policy'] != 'strict_14_with_grace_period'\n\ndf_cancellation = df_revs.loc[super_strict & super_less_strict].copy()\ndf_cancellation.shape\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"super_strict = df_revs['cancellation_policy'] != 'super_strict_30'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"super_less_strict = df_revs['cancellation_policy'] != 'strict_14_with_grace_period'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_cancellation = df_revs.loc[super_strict & super_less_strict].copy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_cancellation.shape\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since emergencies don't happen 14 days in advance, maybe, we will got rid of the two very strict cancellation policies and are down to about 1000 listings."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_cancellation.country.value_counts()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_cancellation.country.value_counts()\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"question-13"},"children":[{"type":"text","value":"Question 13"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What is the average price difference between getting a listing that can be booked instantly vs one that we cannot book it instantly?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_cancellation.instant_bookable.value_counts()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_cancellation.instant_bookable.value_counts()\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"money_columns\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_columns\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_cancellation.pivot_table(\n    index='country',\n    columns='instant_bookable',\n    values=money_columns,\n    aggfunc=['count', 'mean']\n)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_cancellation.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='country',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='instant_bookable',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values=money_columns,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc=['count', 'mean']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Prices don't seem to be too one-sided when it comes to the speed at which one can book the listing, because of this, we will not worry about this measure."}]},{"type":"element","tag":"h3","props":{"id":"question-14"},"children":[{"type":"text","value":"Question 14"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What is the price difference between listings that charge a security deposit vs those that don't?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# let's see the count difference first\ndeposit = df_cancellation['security_deposit'] == 0\nprint(f\"Require a deposit - {df_cancellation.loc[~deposit, 'security_deposit'].count()}\")\nprint(f\"Does not require a deposit - {df_cancellation.loc[deposit, 'security_deposit'].count()}\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# let's see the count difference first\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"deposit = df_cancellation['security_deposit'] == 0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(f\"Require a deposit - {df_cancellation.loc[~deposit, 'security_deposit'].count()}\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(f\"Does not require a deposit - {df_cancellation.loc[deposit, 'security_deposit'].count()}\")\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_cancellation[~deposit].pivot_table(\n    index='country',\n    columns='room_type',\n    values=['two_weeks_price', 'security_deposit'],\n    aggfunc='mean'\n)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_cancellation[~deposit].pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='country',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    columns='room_type',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values=['two_weeks_price', 'security_deposit'],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc='mean'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Overall, the average security deposit fee varies drastically and Belgium seems to be the country with the highest deposit fee on average. Prices per country don't seem to vary much in Entire home/apt but they do vary a bit in a Private room."}]},{"type":"element","tag":"h3","props":{"id":"question-15"},"children":[{"type":"text","value":"Question 15"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What does the average price between different property types look like?"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"df_cancellation.pivot_table(\n    index='property_type',\n    values='two_weeks_price',\n    aggfunc=['count', 'mean']\n)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"df_cancellation.pivot_table(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    index='property_type',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    values='two_weeks_price',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    aggfunc=['count', 'mean']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"loft = df_cancellation.loc[df_cancellation['property_type'] == 'Hostel', ['picture_url', 'country']]\nloft.tail(28)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"loft = df_cancellation.loc[df_cancellation['property_type'] == 'Hostel', ['picture_url', 'country']]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"loft.tail(28)\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"image_show(loft.iloc[0, 0])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"image_show(loft.iloc[0, 0])\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"exercise"},"children":[{"type":"text","value":"Exercise"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Come up with 5 questions to help you narrow the search to at most 100 listings."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":""}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":""}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"_4-dashboard"},"children":[{"type":"text","value":"4. Dashboard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"dashboard","src":"http://materialdesignblog.com/wp-content/uploads/2015/05/energy_mix.gif"},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Source:"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"http://materialdesignblog.com/10-material-design-concepts-of-captivating-data-visualization/","rel":["nofollow"]},"children":[{"type":"text","value":"Material Design Blog"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will now go over several of the many ways in which we can create a dashboard in Python. We will use the library panel for this. Here is the description of Panel from its website,"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Panel is an open-source Python library that lets you create custom interactive web apps and dashboards by connecting user-defined widgets to plots, images, tables, or text. ~ "},{"type":"element","tag":"a","props":{"href":"https://panel.holoviz.org/index.html","rel":["nofollow"]},"children":[{"type":"text","value":"HoloViz Team"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What is a dashboard anyways?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A dashboard is a tool for summarizing critical or general information about a multitude of things that involve data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"In business dashboards are used as graphical user interfaces to show the performance of a company from different angles"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"At a research center or market research firm, dashboards are used to explore data interactively"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Dashboards display important statistics found in a dataset"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Dashboards are used to enhance the viewers experience and ability to see more than one piece of information at a time"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the words of data visualisation expert, "},{"type":"element","tag":"a","props":{"href":"http://www.stephen-few.com/","rel":["nofollow"]},"children":[{"type":"text","value":"Steven Few"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\"A dashboard is a visual display of the most important information needed to achieve one or more objectives; consolidated and arranged on a single screen so the information can be monitored at glance.‚Äù"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now that we now what a dashboard is, let's talk about how to build one with Python."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Load your libraries"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Load your data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sketch out what you need to build"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select a type, interactive or static"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Select the appropriate chart for the information you would like to display"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Choose an appropriate color"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If it is interactive, build a function that returns your visual as an object"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If it is static assign your visual to a variable"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Build the blocks/components of your dashboard into a shape that makes sense for you, e.g. rows, columns, both, none"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the list goes on ..."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's import Panel and a few other functions we will need. A few things to note about Panel first"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Panel has 3 main components: "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Pane, Widget, and Panel"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Almost anything can go into a "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Panel"}]},{"type":"text","value":" (e.g. markdown, visualisations, images, tables, etc.)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Widgets"}]},{"type":"text","value":" provide us with interactivity"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Pane"}]},{"type":"text","value":"'s can be any element, addition or subtraction for a Panel or dashboard"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The convention for importing Panel is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pn"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pn.extension()"}]},{"type":"text","value":" allows us to build interactive objects in the notebook"}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"import panel as pn\nfrom bokeh.transform import factor_cmap, factor_mark\nfrom bokeh.palettes import brewer\n\npn.extension() # setting panel extension from the start allows us to create interactive object in the notebook\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"import panel as pn\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from bokeh.transform import factor_cmap, factor_mark\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"from bokeh.palettes import brewer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pn.extension() # setting panel extension from the start allows us to create interactive object in the notebook\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's create the title of one of our dashboards. Note that we can write markdown text in a piece of string that will go into panel."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"text = \"# A Place to Stay\\nThis dashboard has information found in three places we wish to stay at during our next vacation: South Africa, Japan, and Belgium\"\ntext\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"text = \"# A Place to Stay\\nThis dashboard has information found in three places we wish to stay at during our next vacation: South Africa, Japan, and Belgium\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"text\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will now use our two visualisations from earlier to create a small dashboard."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"pn.Row(pn.Column(text, p), pn.Spacer(width=25), dmap)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pn.Row(pn.Column(text, p), pn.Spacer(width=25), dmap)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's talk about what just happened."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pn.Row()"}]},{"type":"text","value":" allows us to pass in visualisations, plain or markdown text, and other Panel options row-wise"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pn.Column()"}]},{"type":"text","value":" does the same as "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pn.Row()"}]},{"type":"text","value":" but column-wise"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pn.Spacer"}]},{"type":"text","value":" allows us to put space in between our visualisations"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's create an informative plot. We will plot the price per night against the amount of bathrooms in our dataset, and split each point by the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"room_type"}]},{"type":"text","value":" column and increase the size of the plots by the amount of beds in that listing. In addition, because our prices vary drastically, we will transform our price variable to a logarithmic scale, this means that the prices will be in the scale of 10 to the power of 1, 2, 3, and so forth. The benefit of doing this is that it allows us to better observe variables that have values very spread out."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note"}]},{"type":"text","value":" that we are using a sample of our entire dataset from earlier."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"listings_types = df.room_type.unique()\nMARKERS = ['hex', 'circle_x', 'triangle', 'square']  # you can pick any markers you want from bokeh\ncolors = ['#5E81AC', '#EBCB8B', '#A3BE8C', '#B48EAD'] # these colors belong to Nord\n\nbottom_left = figure(title = \"Prices, Bathrooms, and Rooms\", \n                     x_axis_label='Bathrooms', \n                     y_axis_label='Price 4 Our Stay', \n                     y_axis_type=\"log\"\n)\n\nbottom_left.scatter(y=\"price\", \n                    x=\"bathrooms\", \n                    source=df.sample(2000), \n                    legend_field=\"room_type\", # our legend will have our 4 room types\n                    fill_alpha=0.5, # the points will be a bit transparent\n                    size='beds', # they points size will increase by the amount of beds available in that listing\n                    marker=factor_mark('room_type', MARKERS, listings_types), # we map the markers to the room types\n                    color=factor_cmap('room_type', colors, listings_types) # we map the colors to the room types\n)\n\nshow(bottom_left)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"listings_types = df.room_type.unique()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"MARKERS = ['hex', 'circle_x', 'triangle', 'square']  # you can pick any markers you want from bokeh\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"colors = ['#5E81AC', '#EBCB8B', '#A3BE8C', '#B48EAD'] # these colors belong to Nord\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bottom_left = figure(title = \"Prices, Bathrooms, and Rooms\", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                     x_axis_label='Bathrooms', \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                     y_axis_label='Price 4 Our Stay', \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                     y_axis_type=\"log\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bottom_left.scatter(y=\"price\", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                    x=\"bathrooms\", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                    source=df.sample(2000), \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                    legend_field=\"room_type\", # our legend will have our 4 room types\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                    fill_alpha=0.5, # the points will be a bit transparent\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                    size='beds', # they points size will increase by the amount of beds available in that listing\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                    marker=factor_mark('room_type', MARKERS, listings_types), # we map the markers to the room types\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                    color=factor_cmap('room_type', colors, listings_types) # we map the colors to the room types\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"show(bottom_left)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will now proceed to create a sankey diagram with part of the process we have followed so far in the EDA stage. A Sankey diagram is an acyclical flow chart where the width of a line represents the proprotion of the values that flow from the source (e.g. a characteristic of feature in our data) to the target (e.g. the next characteristic or feature we mapped the source to). For the values we can use whichever measure we wish to have flowing through the diagram (e.g. prices, reviews, etc.). In essence, to create a Sankey diagram with holoviews we need the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"source"}]},{"type":"text","value":", a "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"target"}]},{"type":"text","value":", and the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"values"}]},{"type":"text","value":". The source and the target can be any 2 characteristics you want to see a measure flow from and to."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create these three measures (source, target, and the values), we will use pandas groupby to create a multilevel index where the source is the first level, the target is the second, and the values will be represented by whichever measure we aggregate by--our "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"two_weeks_price"}]},{"type":"text","value":" in our case."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"edges1 = df_bath.groupby(['room_type', 'host_is_superhost'])['two_weeks_price'].mean().reset_index() # first flow\nedges2 = df_bath.groupby(['host_is_superhost', 'country'])['two_weeks_price'].mean().reset_index() # second flow\nedges3 = df_bath.groupby(['country', 'cancellation_policy'])['two_weeks_price'].mean().reset_index() # third flow\n\ndatasets = [edges1, edges2, edges3] # list of smaller datasets to concatenate\n\nfor dt in datasets: \n    dt.columns = ['source', 'target', 'value'] # change the column names of all three datasets\n\nedges = pd.concat(datasets, axis=0) # combine all three\nedges.head(10)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"edges1 = df_bath.groupby(['room_type', 'host_is_superhost'])['two_weeks_price'].mean().reset_index() # first flow\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"edges2 = df_bath.groupby(['host_is_superhost', 'country'])['two_weeks_price'].mean().reset_index() # second flow\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"edges3 = df_bath.groupby(['country', 'cancellation_policy'])['two_weeks_price'].mean().reset_index() # third flow\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"datasets = [edges1, edges2, edges3] # list of smaller datasets to concatenate\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"for dt in datasets: \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    dt.columns = ['source', 'target', 'value'] # change the column names of all three datasets\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"edges = pd.concat(datasets, axis=0) # combine all three\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"edges.head(10)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are now ready to create our Sankey diagram. Luckily, Holoviews has abstracted most of the heavy lifting for us and all we need to do is to pass our new dataframe and a title to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"hv.Sankey()"}]},{"type":"text","value":" function of Holoviews. As with most tools in Holoviews, we can add some options to the diagram such as, the position of the labels, the color of the target, the node color, and where to choose these colors from."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"sankey = hv.Sankey(edges, label='Progression of Analysis')\nsankey.opts(label_position='left', edge_color='target', node_color='index', cmap='tab20')\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"sankey = hv.Sankey(edges, label='Progression of Analysis')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"sankey.opts(label_position='left', edge_color='target', node_color='index', cmap='tab20')\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"exercise-1"},"children":[{"type":"text","value":"Exercise"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using the same schema from above, try to add one or more layers to another Sankey diagram. Use a different variable name for it."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":""}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":""}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are always interested in the distributions of our variables, especially the distributions of combined variables. With that in mind, let's examine the distribution of beds within the different kinds of properties in our listing."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"boxwhisker = hv.BoxWhisker(df_bath.sample(2000), # our data\n                           'property_type', # our x axis\n                           'beds', # our y axis\n                           label=\"Distribution of Beds per property Type\" # our title\n                          )\n\nboxwhisker.opts(show_legend=False, # don't show a legend, the x axis has the titles already\n                height=500, \n                width=800, \n                box_fill_color='property_type', # color the boxes by the property type\n                cmap='tab20', # color to choose from\n                xrotation=70 # rotate the labels of the axes\n               )\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"boxwhisker = hv.BoxWhisker(df_bath.sample(2000), # our data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                           'property_type', # our x axis\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                           'beds', # our y axis\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                           label=\"Distribution of Beds per property Type\" # our title\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                          )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"boxwhisker.opts(show_legend=False, # don't show a legend, the x axis has the titles already\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                height=500, \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                width=800, \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                box_fill_color='property_type', # color the boxes by the property type\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                cmap='tab20', # color to choose from\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                xrotation=70 # rotate the labels of the axes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"               )\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Panel can take any object we pass through it, this includes images, blocks of color, etc. Hence, our dashboard can have almost anything we want to add to it. Let's start with a picture."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"png = pn.panel('https://www.clicdata.com/wp-content/uploads/2019/07/blog-difference-bi-dataviz-data-analytics.png', width=400, height=125)\npng\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"png = pn.panel('https://www.clicdata.com/wp-content/uploads/2019/07/blog-difference-bi-dataviz-data-analytics.png', width=400, height=125)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"png\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the second dashboard we will create will use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GridSpec()"}]},{"type":"text","value":" function from Panel. As the name implies, it is a tool that allows us to create a grid full of objects to be displayed as a dashboard. The grid can be extended and contracted as necessary and to place objects in a specific spot we can assign elements in the same fashion in which we assigned elements to our NumPy matrices, by slicing the matrix/grid and assigning the elements we want to each spot."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lastly, we can save any Panel object with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".save()"}]},{"type":"text","value":" function. We can save our dashboard as an HTML file and send/share it with anyone in an email, post, etc., or we can save it as a PNG, SVG, or JPEG file and share a snapshot of our dashboard."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's create our dashboard."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# first create a variable containing your GridSpec object\n# sizing mode specifies if we want it expand and contract with different window sizes\ngspec = pn.GridSpec(sizing_mode='stretch_both', max_height=800, max_width=1000)\n\n# first row and first column, some color\ngspec[0, 0] = pn.Spacer(background='#88C0D0')\n\n# second row and first column, our picture from earlier\ngspec[1, 0] = png\n\n# third row and first column, our title for the dashboard\ngspec[2, 0] = text\n\n# first 2 rows and 2nd and 3rd columns, our boxplots\ngspec[0:3, 1:3] = boxwhisker\n\n# 4th and 5th rows and first column, our scatterplot\ngspec[3:5, 0] = bottom_left\n\n# 4th and 5th rows and 2nd and 3rd columns, our sankey diagram\ngspec[3:5, 1:3] = sankey\n\n# show the plot or save it by uncommenting the .save() method\ngspec.save('testing_dashboard.html')\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# first create a variable containing your GridSpec object\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# sizing mode specifies if we want it expand and contract with different window sizes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec = pn.GridSpec(sizing_mode='stretch_both', max_height=800, max_width=1000)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# first row and first column, some color\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec[0, 0] = pn.Spacer(background='#88C0D0')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# second row and first column, our picture from earlier\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec[1, 0] = png\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# third row and first column, our title for the dashboard\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec[2, 0] = text\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# first 2 rows and 2nd and 3rd columns, our boxplots\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec[0:3, 1:3] = boxwhisker\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# 4th and 5th rows and first column, our scatterplot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec[3:5, 0] = bottom_left\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# 4th and 5th rows and 2nd and 3rd columns, our sankey diagram\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec[3:5, 1:3] = sankey\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# show the plot or save it by uncommenting the .save() method\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"gspec.save('testing_dashboard.html')\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will now create an interactive dashboard using the following columns."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"money_columns = ['price', 'cleaning_fee', 'security_deposit', 'min_price_per_stay', 'two_weeks_price']\nsome_features = ['bathrooms', 'bedrooms', 'beds', 'accommodates', 'guests_included']\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"money_columns = ['price', 'cleaning_fee', 'security_deposit', 'min_price_per_stay', 'two_weeks_price']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"some_features = ['bathrooms', 'bedrooms', 'beds', 'accommodates', 'guests_included']\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One of the ways in which we create an interactive is by first creating functions that generate our desire plots and where the only argument we care about is the variable we want to see change. Here are the steps."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Create a list, or lists, of variables you want to see change"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Create a function that generates your plot and takes as an argument the variable(s) you want to see changing"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Create one or two variables using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pn.widgets.Select()"}]},{"type":"text","value":", pass as arguments\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"value - the starting variable from your list"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"options - the list of variables you want to choose from with your plot"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"name (optional) - a name for such variable"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"On top of your plotting function(s) add what is called a decorator using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@pn.depends()"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Decorators in Python are functions that can be wrapped around another function and provide some additional functionality to it. Think about it as having ice cream and cone, we can eat the ice cream without the cone using a different base but cone will not serve the same purpose without any ice cream. In the same fashion, a decorator add to a function but doesn't necesarily work on it own"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@pn.depends()"}]},{"type":"text","value":" you will pass the values you want your function to change by using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"var_name_you_picked.param.value"}]}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# the x axis will change by our list of features\nx = pn.widgets.Select(value='bathrooms', options=some_features, name='x')\n# the y axis will change by our monetary columns\ny = pn.widgets.Select(value='price', options=money_columns, name='y')\n\n\n@pn.depends(y.param.value, x.param.value) # the decorators always go on top of the function and start with a @ sign\ndef make_pbr_plot(y, x, **kwargs):\n    \"\"\"\n    This is the same plot we created a bit ago but it is now inside a function\n    and the only elements that will change are the x and y axes.\n    When a variable changes, so will the title of our plot as well as the axes titles\n    \"\"\"\n    \n    listings_types = ['Entire home/apt', 'Private room', 'Hotel room', 'Shared room']\n    MARKERS = ['hex', 'circle_x', 'triangle', 'square']\n    colors = ['#5E81AC', '#EBCB8B', '#A3BE8C', '#B48EAD']\n    \n    fig = figure(title = f\"{y.title()}, {x.title()}, and Rooms\", \n                 x_axis_label=f'{x.title()}', \n                 y_axis_label=f'{y.title()} 4 Our Stay', \n                 y_axis_type=\"log\")\n    \n    fig.scatter(y=y, x=x, source=df.sample(2000), legend_field=\"room_type\", fill_alpha=0.5, size='beds',\n          marker=factor_mark('room_type', MARKERS, listings_types),\n          color=factor_cmap('room_type', colors, listings_types))\n\n    return fig\n\n\n@pn.depends(x.param.value) # this function will only change the features of a listing\ndef cat_whiskers(x, **kwargs):\n    \"\"\"\n    Same function as before but by many features now\n    \"\"\"\n    title = f\"Rooms and {x.title()} distribution\"\n    boxwhisker = hv.BoxWhisker(df.sample(2000), 'room_type', x, label=title)\n    boxwhisker.opts(show_legend=False, width=600, box_fill_color='room_type', cmap='Set1')\n    return boxwhisker\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# the x axis will change by our list of features\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"x = pn.widgets.Select(value='bathrooms', options=some_features, name='x')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# the y axis will change by our monetary columns\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"y = pn.widgets.Select(value='price', options=money_columns, name='y')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"@pn.depends(y.param.value, x.param.value) # the decorators always go on top of the function and start with a @ sign\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"def make_pbr_plot(y, x, **kwargs):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    This is the same plot we created a bit ago but it is now inside a function\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    and the only elements that will change are the x and y axes.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    When a variable changes, so will the title of our plot as well as the axes titles\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    listings_types = ['Entire home/apt', 'Private room', 'Hotel room', 'Shared room']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    MARKERS = ['hex', 'circle_x', 'triangle', 'square']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    colors = ['#5E81AC', '#EBCB8B', '#A3BE8C', '#B48EAD']\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    fig = figure(title = f\"{y.title()}, {x.title()}, and Rooms\", \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                 x_axis_label=f'{x.title()}', \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                 y_axis_label=f'{y.title()} 4 Our Stay', \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"                 y_axis_type=\"log\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    fig.scatter(y=y, x=x, source=df.sample(2000), legend_field=\"room_type\", fill_alpha=0.5, size='beds',\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          marker=factor_mark('room_type', MARKERS, listings_types),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"          color=factor_cmap('room_type', colors, listings_types))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return fig\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"@pn.depends(x.param.value) # this function will only change the features of a listing\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"def cat_whiskers(x, **kwargs):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    Same function as before but by many features now\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    title = f\"Rooms and {x.title()} distribution\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    boxwhisker = hv.BoxWhisker(df.sample(2000), 'room_type', x, label=title)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    boxwhisker.opts(show_legend=False, width=600, box_fill_color='room_type', cmap='Set1')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    return boxwhisker\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The last piece of the puzzle is to use this functions to create a dashboard that shows the widget to interact with the variables and our two charts from before. We will arrange our dashboard in 3 rows where on will have 5 elements, another will be a bit of space between the charts, and the next will be our second chart."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# this is our dashboard\nchild_1 = pn.Row( # this creates our rows\n    pn.Column('## Vars Explorer', x, y, pn.Spacer(width=25), cat_whiskers), # first element of our row has a column of 5 elements\n    pn.Spacer(width=25), # the 2nd element of our row has a bit of space for our charts\n    make_pbr_plot) # the 3rd element has our second chart\n\n\nchild_1#.save('example.html') # save it and share it with anyone : )\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# this is our dashboard\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"child_1 = pn.Row( # this creates our rows\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    pn.Column('## Vars Explorer', x, y, pn.Spacer(width=25), cat_whiskers), # first element of our row has a column of 5 elements\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    pn.Spacer(width=25), # the 2nd element of our row has a bit of space for our charts\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    make_pbr_plot) # the 3rd element has our second chart\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"child_1#.save('example.html') # save it and share it with anyone : )\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lastly, panel also allows us to create multiple tabs that might contain anything we want. This includes dashboards, graphs, text, etc. You can add a name to each tab by passing a tuple where the first element is the name of the tab and the second is whatever you would like to display. Let's create one with two of our dashboards and the sankey diagram."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes github-dark github-light","code":"# initialise your object and pass in the tuples with the tab name and the onject you want to display.\npn.Tabs(\n    ('Analysis', child_1), \n    ('Process', pn.Column(\"# This is our Sankey Diagram\", sankey)),\n    ('Grid', gspec)\n    \n)#.save('example2.html') # save it and share it with friends : )\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# initialise your object and pass in the tuples with the tab name and the onject you want to display.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pn.Tabs(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    ('Analysis', child_1), \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    ('Process', pn.Column(\"# This is our Sankey Diagram\", sankey)),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    ('Grid', gspec)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")#.save('example2.html') # save it and share it with friends : )\n"}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"_5-takeaways-reporting"},"children":[{"type":"text","value":"5. Takeaways / Reporting"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Exploratory data analysis is fun and informative. It is a stage in which questions come and go, answers fly in and out, and we, in our way, shape up our knowledge of the data at hand. It is even more fun to do so with a dataset we are interested in, should we be doing it for a personal project, of course. So what have we learned about our quest for a good place to stay at thus far"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Prices can vary by many different factors such as beds and bathrooms available as well as the room type, and having a pre-defined set of measures to go by (e.g. budget, minimum requirements such as at least 1 bathroom and 1 bed) can help us stay more focused during the analysis"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Reviews are important and can give us a general idea on what to expect from a listing"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Don't take out variables or characteristic from within a variable (e.g. lisence) without knowing the context"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Room type alongside our own pre-defined price measure, is one of the most important factors guiding our search"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Remember our Goal"}]},{"type":"text","value":" - To find the best place to stay at for our next vacation in terms of costs, venue, and things to do around it, given our top 3 destinations for 2021."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using the set of criteria chosen before our data analysis, we can continue narrowing down even further the space of options to choose from. It is now you turn to go from 1000 to 100 or less options to choose from. Don't forget to visualise them with our image function!"}]},{"type":"element","tag":"h1","props":{"id":"_6-blind-spots"},"children":[{"type":"text","value":"6. Blind Spots"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here are some additional questions or key points we could have completed or think about throughout our analysis."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"We could have continued crosstabulating different variables together to spot diverese interactions within our data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"We could have extracted more keywords from the listing description and even from the amenities variable"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"We could have explored the locations within our countries of choice further"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Were there any price differences between the defferent amount of time hosts have been with Airbnb?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Even though we need Wifi for certain, we did not calculate the difference in prices between it and not having it"}]}]},{"type":"element","tag":"h1","props":{"id":"_7-future-work"},"children":[{"type":"text","value":"7. Future work"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here are some points we could explore and cover with further analysis."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"We could explore the actual reviews to gain more insight as to where the best place to stay at is. This would require the other datasets in "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Inside Airbnb"}]},{"type":"text","value":" and diving deep into Text Analytics"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Some statistical modeling. We could have evaluated whether the differences in average prices given "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" measure were statistically significant or not"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Geospatial analysis. Are the prices within one location significantly different from another?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This is a shareable notebook with an analysis using previously generated data, other options could have been to create an app that refreshes its data every time Inside Airbnb scrapes data from Airbnb"}]}]},{"type":"element","tag":"h1","props":{"id":"awesome-work"},"children":[{"type":"text","value":"Awesome Work!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"congrats","src":"https://media.giphy.com/media/xUOrwiqZxXUiJewDrq/giphy.gif"},"children":[]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"notebook-outline","depth":2,"text":"Notebook Outline"},{"id":"_1-what-is-eda","depth":2,"text":"1. What is EDA?"},{"id":"_2-questions-to-explore","depth":2,"text":"2. Questions to Explore"},{"id":"_31-a-bit-of-preparation","depth":2,"text":"3.1 A Bit of Preparation"},{"id":"_32-exploratory-stage","depth":2,"text":"3.2 Exploratory Stage","children":[{"id":"question-1","depth":3,"text":"Question 1"},{"id":"question-2","depth":3,"text":"Question 2"},{"id":"question-3","depth":3,"text":"Question 3"},{"id":"question-4","depth":3,"text":"Question 4"},{"id":"question-5","depth":3,"text":"Question 5"},{"id":"question-6","depth":3,"text":"Question 6"},{"id":"question-7","depth":3,"text":"Question 7"},{"id":"question-8","depth":3,"text":"Question 8"},{"id":"question-9","depth":3,"text":"Question 9"},{"id":"question-10","depth":3,"text":"Question 10"},{"id":"question-11","depth":3,"text":"Question 11"},{"id":"question-12","depth":3,"text":"Question 12"},{"id":"question-13","depth":3,"text":"Question 13"},{"id":"question-14","depth":3,"text":"Question 14"},{"id":"question-15","depth":3,"text":"Question 15"}]},{"id":"exercise","depth":2,"text":"Exercise"},{"id":"exercise-1","depth":2,"text":"Exercise"}]}},"_type":"markdown","_id":"content:2.analytics:6.eda.md","_source":"content","_file":"2.analytics/6.eda.md","_extension":"md"}